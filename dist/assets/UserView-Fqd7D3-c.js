import{_ as I,Q as v,c as n,a as i,N as p,U as D,F as a,r as f,z as G,A as C,o as l,t as g,S as U}from"./index-CA5ek_K4.js";var d={};const w={name:"UserView",data(){return{userID:"",choices:[],chose:[],userGroups:[],groups:{}}},methods:{async fetchChoices(s){if(!/^[0-9a-f]{24}$/.test(s)){alert("Invalid user ID");return}const o=await fetch(`${d.URL}/api/users/${s}/choices`,{methods:"GET"});this.choices=await o.json(),this.chose={};for(let e=0;e<this.choices.length;e++)for(let u=0;u<this.userGroups.length;u++){console.log(this.choices[e].subgroups);for(let t=0;t<this.choices[e].subgroups.length;t++)console.log(this.choices[e].subgroups[t]._id),console.log(this.userGroups[u]),this.choices[e].subgroups[t]._id===this.userGroups[u]&&(this.chose[this.choices[e]._id]=this.userGroups[u]);this.chose[this.choices[e]._id]===void 0&&(this.chose[this.choices[e]._id]=this.choices[e].subgroups[0]._id)}},async fetchGroups(s){if(!/^[0-9a-f]{24}$/.test(s)){alert("Invalid user ID");return}const o=await fetch(`${d.URL}/api/users/${s}`,{methods:"GET"});this.userGroups=await o.json(),this.userGroups=this.userGroups.groups},async groupList(){let o=await(await fetch(`${d.URL}/api/groups`,{methods:"GET"})).json();for(let e=0;e<o.length;e++)this.groups[o[e]._id]=o[e].name},async saveUserID(s){localStorage.setItem("userID",s)}},mounted(){const s=localStorage.getItem("userID");s&&(this.userID=s,this.fetchGroups(s),this.fetchChoices(s),this.groupList())}},y={class:"course"},b=i("h1",null,"This is an user page",-1),V=["onUpdate:modelValue","value","id"],L=["for"];function R(s,o,e,u,t,c){const _=v("AddClassModal");return l(),n(a,null,[i("div",y,[b,p(i("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.userID=r),type:"text",placeholder:"Enter your user ID",onChange:o[1]||(o[1]=r=>{c.fetchGroups(t.userID),c.fetchChoices(t.userID),c.saveUserID(t.userID)})},null,544),[[D,t.userID]]),i("ul",null,[(l(!0),n(a,null,f(t.choices,r=>(l(),n("li",null,[i("div",null,g(r.name),1),i("ul",null,[(l(!0),n(a,null,f(r.subgroups,h=>(l(),n("li",null,[p(i("input",{type:"radio","onUpdate:modelValue":m=>t.chose[r._id]=m,value:h._id,id:h._id},null,8,V),[[U,t.chose[r._id]]]),i("label",{for:h._id},g(t.groups[h._id]),9,L)]))),256))])]))),256))])]),s.modalOpen?(l(),G(_,{key:0,courseID:s.activeCourse,onClose:o[2]||(o[2]=r=>s.modalOpen=!1),onRefresh:s.fetchCourses},null,8,["courseID","onRefresh"])):C("",!0)],64)}const E=I(w,[["render",R]]);export{E as default};
